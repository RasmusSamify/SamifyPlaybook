<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samify Sales Dashboard V10</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Zapier Chatbot Script -->
    <script async type='module' src='https://interfaces.zapier.com/assets/web-components/zapier-interfaces/zapier-interfaces.esm.js'></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@400;600;700&display=swap');
        
        * { font-family: 'Inter', sans-serif; }
        body { overflow: hidden; background-color: #f1f5f9; }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #e2e8f0; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Animations */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Phase Button Active State */
        .phase-btn.active {
            background-color: white;
            color: #312e81; /* Indigo-900 */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }

        /* Tabs */
        .sub-tab.active {
            border-bottom: 2px solid #4f46e5;
            color: #4f46e5;
            background-color: #eef2ff;
        }

        /* Form Specific Styles */
        .form-step { display: none; animation: fadeIn 0.4s ease-out; }
        .form-step.active { display: block; }
        
        .radio-card input:checked + label {
            border-color: #4f46e5; background-color: #eef2ff; color: #4f46e5; font-weight: 700;
        }
        .progress-bar { transition: width 0.4s ease; }

        /* Chart Container */
        .chart-wrapper { position: relative; height: 250px; width: 100%; }
        
        /* Objection & Arsenal Content */
        .objection-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .objection-content.open { max-height: 2000px; } 
    </style>
</head>
<body class="h-screen flex flex-col text-slate-800">

    <!-- HEADER -->
    <header class="bg-gradient-to-r from-slate-900 via-indigo-900 to-slate-900 text-white px-6 py-3 shadow-lg shrink-0 z-30 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-white/10 p-2 rounded-lg backdrop-blur-sm border border-white/10">
                <i class="fa-solid fa-bolt text-yellow-400"></i>
            </div>
            <div>
                <h1 class="font-bold text-lg tracking-tight leading-none">Samify <span class="font-light opacity-70">OS</span></h1>
                <div class="flex items-center gap-2 text-[10px] text-indigo-200 mt-1">
                    <span class="w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"></span>
                    Sales Dashboard V10
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex gap-2 bg-black/20 p-1 rounded-xl border border-white/5">
            <button onclick="setPhase('discovery')" id="btn-discovery" class="phase-btn active px-4 py-1.5 rounded-lg text-sm font-semibold transition-all flex items-center gap-2">
                <i class="fa-solid fa-calculator"></i> 1. Uppt√§ck & ROI
            </button>
            <button onclick="setPhase('presentation')" id="btn-presentation" class="phase-btn px-4 py-1.5 rounded-lg text-sm font-semibold transition-all flex items-center gap-2 text-indigo-100 hover:bg-white/10">
                <i class="fa-solid fa-chalkboard-user"></i> 2. Presentera
            </button>
            <button onclick="setPhase('objection')" id="btn-objection" class="phase-btn px-4 py-1.5 rounded-lg text-sm font-semibold transition-all flex items-center gap-2 text-indigo-100 hover:bg-white/10">
                <i class="fa-solid fa-shield-halved"></i> 3. Hantera
            </button>
            <button onclick="setPhase('closing')" id="btn-closing" class="phase-btn px-4 py-1.5 rounded-lg text-sm font-semibold transition-all flex items-center gap-2 text-indigo-100 hover:bg-white/10">
                <i class="fa-solid fa-check"></i> 4. St√§ng
            </button>
        </div>

        <div class="flex gap-3">
            <button class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition">
                <i class="fa-solid fa-user text-sm"></i>
            </button>
        </div>
    </header>

    <!-- MAIN CONTAINER -->
    <div class="flex-1 flex overflow-hidden min-h-0 bg-slate-100">

        <!-- COLUMN 1: ARBETSYTA (75%) -->
        <main class="w-3/4 flex flex-col border-r border-slate-200 relative overflow-hidden bg-white">
            
            <!-- VIEW 1: DISCOVERY & ROI (Side by Side) -->
            <div id="view-discovery" class="phase-view h-full flex flex-col overflow-hidden">
                <div class="bg-indigo-50 border-b border-indigo-100 px-8 py-4 shrink-0 flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold text-indigo-900"><i class="fa-solid fa-magnifying-glass mr-2"></i>Steg 1: Analysera & Kalkylera</h2>
                        <p class="text-sm text-indigo-600">Fyll i behovsanalysen till h√∂ger. Anv√§nd ROI-kalkylatorn till v√§nster f√∂r att bygga caset.</p>
                    </div>
                </div>

                <div class="flex-1 flex overflow-hidden">
                    <!-- LEFT SPLIT: ADVANCED ROI CALCULATOR -->
                    <div class="w-1/2 overflow-y-auto custom-scrollbar p-6 bg-slate-50 border-r border-slate-200">
                        <div class="max-w-xl mx-auto">
                            <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-calculator text-indigo-500"></i> ROI Kalkylator</h3>
                            
                            <!-- 1. Salary Scenarios -->
                            <div class="mb-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">A. L√∂neniv√• (M√•nadskostnad)</label>
                                <select id="roi-salary" onchange="calculateROI()" class="w-full p-2 border border-slate-200 rounded-lg text-sm bg-slate-50 font-medium">
                                    <option value="43500">Junior / Mindre ort (43 500 kr)</option>
                                    <option value="55100" selected>Median / Standard (55 100 kr)</option>
                                    <option value="68000">Senior / Storstad (68 000 kr)</option>
                                </select>
                                <p class="text-[10px] text-slate-400 mt-1">*Inkluderar 45% overhead/arbetsgivaravgifter.</p>
                            </div>

                            <!-- 2. H√§vst√§nger -->
                            <div class="mb-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-3">B. ROI H√§vst√§nger</label>
                                
                                <!-- Tidsst√∂lden -->
                                <div class="mb-4 pb-4 border-b border-slate-100">
                                    <div class="flex justify-between mb-1">
                                        <span class="text-sm font-bold text-slate-700">Tidsst√∂lden (Admin/dag)</span>
                                        <span class="text-indigo-600 font-bold" id="roi-hours-display">2 h</span>
                                    </div>
                                    <input type="range" id="roi-hours" min="0" max="8" value="2" step="0.5" oninput="calculateROI()" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                                </div>

                                <!-- Checkboxes -->
                                <div class="space-y-2">
                                    <label class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer transition">
                                        <input type="checkbox" id="roi-closing" onchange="calculateROI()" class="w-4 h-4 text-indigo-600 rounded">
                                        <div>
                                            <span class="block text-sm font-bold text-slate-700">üìâ Bokslutspivoten</span>
                                            <span class="text-[10px] text-slate-500">Fr√•n 5 dagar till 4 timmar</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer transition">
                                        <input type="checkbox" id="roi-scale" onchange="calculateROI()" class="w-4 h-4 text-indigo-600 rounded">
                                        <div>
                                            <span class="block text-sm font-bold text-slate-700">üöÄ Skalbarhet</span>
                                            <span class="text-[10px] text-slate-500">Undvik nyanst√§llning (Headcount)</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer transition">
                                        <input type="checkbox" id="roi-error" onchange="calculateROI()" class="w-4 h-4 text-indigo-600 rounded">
                                        <div>
                                            <span class="block text-sm font-bold text-slate-700">‚úÖ Felmarginal</span>
                                            <span class="text-[10px] text-slate-500">Kostnad f√∂r att r√§tta fel</span>
                                        </div>
                                    </label>
                                    <label class="flex items-center gap-3 p-2 hover:bg-slate-50 rounded cursor-pointer transition">
                                        <input type="checkbox" id="roi-tech" onchange="calculateROI()" class="w-4 h-4 text-indigo-600 rounded">
                                        <div>
                                            <span class="block text-sm font-bold text-slate-700">üõ°Ô∏è Teknisk Skuld</span>
                                            <span class="text-[10px] text-slate-500">Slipp API-uppdateringar & Drift</span>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <!-- 3. Investment (Package) -->
                            <div class="mb-4 bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                                <h4 class="text-[10px] font-bold text-indigo-400 uppercase mb-3">Investering & Scenario</h4>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-[10px] font-bold text-indigo-900 mb-1">M√•nadspaket</label>
                                        <select id="roi-package" onchange="calculateROI()" class="w-full p-2 border border-indigo-200 rounded-lg text-sm bg-white">
                                            <option value="5000">Small (5 000 kr)</option>
                                            <option value="10000">Medium (10 000 kr)</option>
                                            <option value="15000" selected>Large (15 000 kr)</option>
                                            <option value="20000">XL (20 000 kr)</option>
                                            <option value="25000">Enterprise (25 000 kr)</option>
                                        </select>
                                        <p class="text-[9px] text-indigo-500 mt-1">+ Startavgift 7 995 kr</p>
                                    </div>
                                    <div>
                                        <label class="block text-[10px] font-bold text-indigo-900 mb-1">Spar-scenario</label>
                                        <select id="roi-scenario" onchange="calculateROI()" class="w-full p-2 border border-indigo-200 rounded-lg text-sm bg-white">
                                            <option value="0.7">Konservativt</option>
                                            <option value="1.0" selected>Neutralt</option>
                                            <option value="1.3">Optimistiskt</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Result Box -->
                            <div class="bg-slate-800 text-white p-6 rounded-xl shadow-lg relative overflow-hidden">
                                <div class="absolute top-0 right-0 w-32 h-32 bg-green-500 rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                                <div class="relative z-10">
                                    <p class="text-slate-400 text-xs uppercase font-bold mb-1">Netto Besparing √Ör 1</p>
                                    <p class="text-3xl font-bold text-green-400" id="res-money">0 kr</p>
                                    <p class="text-xs text-slate-500 mt-2">*Efter avdrag f√∂r startavgift & m√•nadskostnad.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT SPLIT: FULL NEEDS ANALYSIS FORM -->
                    <div class="w-1/2 overflow-y-auto custom-scrollbar p-6 bg-white">
                        <div class="max-w-xl mx-auto">
                            <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2"><i class="fa-solid fa-list-check text-indigo-500"></i> Behovsanalys</h3>
                            <div id="form-wrapper">
                                <div class="mb-4">
                                    <div class="progress-bg h-1 bg-slate-100 rounded-full overflow-hidden"><div class="progress-bar h-full bg-indigo-600 w-1/5" id="progressBar"></div></div>
                                    <div class="text-right text-xs text-slate-400 mt-2 font-bold">Steg <span id="stepCount">1</span> av 5</div>
                                </div>

                                <form id="customForm" action="https://hooks.zapier.com/hooks/catch/25909526/ue4p4vt/" method="POST">
                                    <!-- STEG 1: Grunddata -->
                                    <div class="form-step active" data-step="1">
                                        <h4 class="text-lg font-bold mb-3 text-slate-800">Grundl√§ggande Info üè¢</h4>
                                        <div class="space-y-3">
                                            <input type="text" name="namn" required placeholder="Ditt namn" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                            <div class="grid grid-cols-2 gap-2">
                                                <input type="text" name="foretag" required placeholder="F√∂retag" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                                <input type="text" name="bransch" placeholder="Bransch" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                            </div>
                                            <select name="roll" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-2">
                                                <option value="" disabled selected>V√§lj roll</option>
                                                <option value="VD">VD/√Ñgare</option>
                                                <option value="S√§ljchef">S√§ljchef</option>
                                                <option value="Ekonomi">Ekonomi</option>
                                                <option value="Admin">Admin/Ops</option>
                                                <option value="Annat">Annat</option>
                                            </select>
                                            
                                            <label class="block text-xs font-bold mt-2 mb-1 text-slate-500 uppercase">Antal anst√§llda</label>
                                            <div class="grid grid-cols-4 gap-2">
                                                <div class="radio-card"><input type="radio" name="anstallda" id="s1" value="1-5"/><label for="s1">1-5</label></div>
                                                <div class="radio-card"><input type="radio" name="anstallda" id="s2" value="6-20"/><label for="s2">6-20</label></div>
                                                <div class="radio-card"><input type="radio" name="anstallda" id="s3" value="21-50"/><label for="s3">21-50</label></div>
                                                <div class="radio-card"><input type="radio" name="anstallda" id="s4" value="50+"/><label for="s4">50+</label></div>
                                            </div>
                                        </div>
                                        <button type="button" class="btn-next w-full bg-indigo-600 text-white py-3 rounded-lg font-bold mt-6 text-sm hover:bg-indigo-700 transition">N√§sta steg ‚ûî</button>
                                    </div>

                                    <!-- STEG 2: System -->
                                    <div class="form-step" data-step="2">
                                        <h4 class="text-lg font-bold mb-3 text-slate-800">Era System üíª</h4>
                                        <div class="space-y-3">
                                            <input type="text" name="webb" placeholder="E-handel / Hemsida (t.ex. Shopify)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                            <input type="text" name="erp" placeholder="Aff√§rs- & Bokf√∂ring (t.ex. Fortnox)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                            <input type="text" name="crm" placeholder="CRM / S√§ljst√∂d (t.ex. HubSpot)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                            
                                            <label class="block text-xs font-bold mt-2 mb-1 text-slate-500 uppercase">Kommunikation</label>
                                            <div class="grid grid-cols-2 gap-2">
                                                <div class="radio-card"><input type="radio" name="comm" id="c1" value="Slack"/><label for="c1">Slack</label></div>
                                                <div class="radio-card"><input type="radio" name="comm" id="c2" value="Teams"/><label for="c2">Teams</label></div>
                                                <div class="radio-card"><input type="radio" name="comm" id="c3" value="Email"/><label for="c3">Email</label></div>
                                                <div class="radio-card"><input type="radio" name="comm" id="c4" value="Annat"/><label for="c4">Annat</label></div>
                                            </div>
                                        </div>
                                        <div class="flex justify-between mt-6"><button type="button" class="btn-prev text-slate-500 font-bold text-sm">Tillbaka</button><button type="button" class="btn-next bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold text-sm">N√§sta ‚ûî</button></div>
                                    </div>

                                    <!-- STEG 3: Processer -->
                                    <div class="form-step" data-step="3">
                                        <h4 class="text-lg font-bold mb-3 text-slate-800">Processer ‚öôÔ∏è</h4>
                                        <select name="goal" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3">
                                            <option value="" disabled selected>Prim√§rt m√•l med automation?</option>
                                            <option value="Tid">Spara tid / Minska admin</option>
                                            <option value="Fel">Minska manuella fel</option>
                                            <option value="S√§lj">√ñka f√∂rs√§ljning</option>
                                            <option value="Kund">B√§ttre kundupplevelse</option>
                                        </select>
                                        <textarea name="pain" rows="3" placeholder="Beskriv manuellt arbete ni g√∂r idag (Klipp & Klistra)..." class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"></textarea>
                                        <label class="block text-xs font-bold mb-1 text-slate-500 uppercase">Uppskattad tid p√• admin/vecka?</label>
                                        <div class="grid grid-cols-4 gap-2 mb-4">
                                            <div class="radio-card"><input type="radio" name="time" id="t1" value="0-5"/><label for="t1">0-5h</label></div>
                                            <div class="radio-card"><input type="radio" name="time" id="t2" value="5-10"/><label for="t2">5-10h</label></div>
                                            <div class="radio-card"><input type="radio" name="time" id="t3" value="10-20"/><label for="t3">10-20h</label></div>
                                            <div class="radio-card"><input type="radio" name="time" id="t4" value="20+"/><label for="t4">20+</label></div>
                                        </div>
                                        <input type="text" name="volume" placeholder="Volym per m√•nad (t.ex. 50 ordrar)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"/>
                                        <div class="flex justify-between mt-6"><button type="button" class="btn-prev text-slate-500 font-bold text-sm">Tillbaka</button><button type="button" class="btn-next bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold text-sm">N√§sta ‚ûî</button></div>
                                    </div>

                                    <!-- STEG 4: AI -->
                                    <div class="form-step" data-step="4">
                                        <h4 class="text-lg font-bold mb-3 text-slate-800">Kundtj√§nst & AI ü§ñ</h4>
                                        <input type="text" name="support" placeholder="Hur sker support idag? (Mail/Tel)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"/>
                                        <textarea name="faq" rows="2" placeholder="Vanligaste fr√•gorna? (t.ex. Var √§r mitt paket?)" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"></textarea>
                                        <select name="ai_goal" class="w-full p-3 border rounded-lg bg-slate-50 text-sm">
                                            <option value="" disabled selected>Om ni skaffar AI-bot, vad ska den g√∂ra?</option>
                                            <option value="Support">Support & Avlastning</option>
                                            <option value="Sales">S√§ljst√∂d & Leads</option>
                                            <option value="Both">B√•de och</option>
                                            <option value="NotInterested">Ej aktuellt just nu</option>
                                        </select>
                                        <div class="flex justify-between mt-6"><button type="button" class="btn-prev text-slate-500 font-bold text-sm">Tillbaka</button><button type="button" class="btn-next bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold text-sm">Sista steget ‚ûî</button></div>
                                    </div>

                                    <!-- STEG 5: Avslut -->
                                    <div class="form-step" data-step="5">
                                        <h4 class="text-lg font-bold mb-3 text-slate-800">Slutspurten! üöÄ</h4>
                                        <div class="grid grid-cols-2 gap-3 mb-3">
                                            <select name="start" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"><option>Start: Snarast</option><option>Start: 1 m√•n</option><option>Start: Senare</option></select>
                                            <select name="budget" class="w-full p-3 border rounded-lg bg-slate-50 text-sm"><option>Budget: Startpaket</option><option>Budget: Helhet</option><option>Budget: Vet ej</option></select>
                                        </div>
                                        <input type="tel" name="phone" placeholder="Telefonnummer" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"/>
                                        <input type="email" name="email" required placeholder="E-postadress" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"/>
                                        <input type="text" name="contact_time" placeholder="√ñnskad tid f√∂r kontakt?" class="w-full p-3 border rounded-lg bg-slate-50 text-sm mb-3"/>
                                        <div class="flex justify-between mt-6"><button type="button" class="btn-prev text-slate-500 font-bold text-sm">Tillbaka</button><button type="submit" class="btn-submit bg-green-600 text-white px-8 py-3 rounded-lg font-bold shadow-lg hover:bg-green-700 transition">Skicka Analys</button></div>
                                    </div>
                                </form>
                            </div>
                            <div id="success-message" class="hidden text-center py-20">
                                <h3 class="text-2xl text-green-600 font-bold mb-2">Tack! üöÄ</h3>
                                <p class="text-slate-500 text-sm mb-4">Din analys √§r inskickad. Vi h√∂r av oss inom kort!</p>
                                <button onclick="location.reload()" class="mt-4 text-indigo-600 underline text-sm">Starta ny</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 2: PRESENTATION -->
            <div id="view-presentation" class="phase-view hidden h-full flex flex-col">
                <div class="border-b border-slate-200 px-8 pt-4 flex gap-8 shrink-0 bg-white shadow-sm">
                    <button onclick="switchPresTab('pitches')" id="tab-pitches" class="sub-tab active pb-4 px-2 text-sm font-bold transition flex items-center gap-2">
                        <i class="fa-solid fa-microphone-lines"></i> S√§ljmanus
                    </button>
                    <button onclick="switchPresTab('competitors')" id="tab-competitors" class="sub-tab pb-4 px-2 text-sm font-bold text-slate-400 hover:text-slate-800 transition flex items-center gap-2">
                        <i class="fa-solid fa-crosshairs"></i> Konkurrenter
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto custom-scrollbar p-8 bg-slate-50">
                    <div id="content-pitches" class="fade-in max-w-4xl mx-auto">
                        <div class="flex flex-wrap gap-2 mb-6 justify-center">
                            <button onclick="renderPitch('trap')" class="p-pill bg-white border border-slate-200 hover:border-indigo-400 px-4 py-2 rounded-full text-xs font-bold text-slate-500 shadow-sm transition">ü™§ App-f√§llan</button>
                            <button onclick="renderPitch('cfo')" class="p-pill bg-white border border-slate-200 hover:border-indigo-400 px-4 py-2 rounded-full text-xs font-bold text-slate-500 shadow-sm transition">üí∞ CFO-Pivoten</button>
                            <button onclick="renderPitch('scale')" class="p-pill bg-white border border-slate-200 hover:border-indigo-400 px-4 py-2 rounded-full text-xs font-bold text-slate-500 shadow-sm transition">üìà Skalbar Service</button>
                            <button onclick="renderPitch('retainer')" class="p-pill bg-white border border-slate-200 hover:border-indigo-400 px-4 py-2 rounded-full text-xs font-bold text-slate-500 shadow-sm transition">üîÑ Anti-Konsult</button>
                            <button onclick="renderPitch('tech')" class="p-pill bg-white border border-slate-200 hover:border-indigo-400 px-4 py-2 rounded-full text-xs font-bold text-slate-500 shadow-sm transition">üõ°Ô∏è Teknisk Trygghet</button>
                        </div>
                        <div id="pitch-display" class="bg-white rounded-2xl shadow-xl shadow-indigo-100/50 border border-slate-200 p-10"></div>
                    </div>
                    <div id="content-competitors" class="hidden fade-in max-w-5xl mx-auto">
                        <div class="grid grid-cols-2 gap-8">
                            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200"><div class="chart-wrapper"><canvas id="compChart"></canvas></div></div>
                            <div class="space-y-4">
                                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm"><h4 class="font-bold text-indigo-900">Automation vs Kommunikation</h4><p class="text-sm text-slate-600">Konkurrenter fokuserar p√• chatt. Vi fokuserar p√• dataflytt.</p></div>
                                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm"><h4 class="font-bold text-indigo-900">√ñppet Ekosystem</h4><p class="text-sm text-slate-600">Vi kopplar 9000+ appar via Zapier.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 3: OBJECTIONS & ARSENAL -->
            <div id="view-objection" class="phase-view hidden h-full flex flex-col p-8 overflow-y-auto custom-scrollbar">
                <div class="flex gap-8 h-full">
                    <!-- LEFT: OBJECTIONS -->
                    <div class="w-1/2 flex flex-col">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><i class="fa-solid fa-shield-halved text-indigo-500"></i> Inv√§ndningar (Motst√•nd)</h3>
                        <div class="relative mb-4">
                            <i class="fa-solid fa-search absolute left-4 top-3.5 text-slate-400"></i>
                            <input type="text" id="objSearch" placeholder="S√∂k motargument..." class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 shadow-sm outline-none transition focus:border-indigo-500 text-sm">
                        </div>
                        <div id="objections-list" class="flex-1 overflow-y-auto custom-scrollbar space-y-3 pr-2"></div>
                    </div>

                    <!-- RIGHT: ARSENAL (QUESTIONS) -->
                    <div class="w-1/2 flex flex-col">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"><i class="fa-solid fa-clipboard-question text-green-500"></i> Arsenalen (Fr√•gor)</h3>
                        <div id="arsenal-list" class="flex-1 overflow-y-auto custom-scrollbar space-y-4 pr-2">
                            <!-- Questions populated via JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 4: CLOSING (CALENDLY) -->
            <div id="view-closing" class="phase-view hidden h-full flex flex-col p-8 overflow-y-auto custom-scrollbar items-center">
                <h3 class="text-2xl font-bold text-slate-700 mb-6">Boka in kunden</h3>
                <!-- Calendly inline widget begin -->
                <div class="calendly-inline-widget" data-url="https://calendly.com/samify-info/30min" style="min-width:320px;height:700px;width:100%;"></div>
                <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
                <!-- Calendly inline widget end -->
            </div>

        </main>

        <!-- COLUMN 2: AI & VALUE (Right - 25% Width) -->
        <aside class="w-1/4 min-w-[350px] bg-white border-l border-slate-200 flex flex-col shrink-0 shadow-xl z-20 relative">
             
             <!-- Chatbot Area (80% Height) -->
             <div class="h-[80%] w-full relative bg-slate-50 border-b border-slate-200 flex flex-col">
                 <div class="p-3 bg-white border-b border-slate-100 flex justify-between items-center shrink-0 h-12">
                    <h3 class="font-bold text-slate-700 text-sm flex items-center gap-2"><div class="w-2 h-2 bg-indigo-600 rounded-full"></div> Samify AI</h3>
                    <span class="text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-bold">ONLINE</span>
                 </div>
                 <div class="flex-1 relative">
                     <zapier-interfaces-chatbot-embed is-popup='false' chatbot-id='cml9x572t0029ibz47krur5g7' height='100%' width='100%' class="absolute inset-0 w-full h-full"></zapier-interfaces-chatbot-embed>
                 </div>
            </div>

            <!-- ROI Card Area (20% Height) -->
            <div class="h-[20%] bg-slate-900 text-white p-6 relative overflow-hidden flex flex-col justify-center">
                <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-600 rounded-full blur-3xl opacity-20 -mr-10 -mt-10"></div>
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] text-slate-400 uppercase font-bold tracking-widest">Netto Besparing (√Ör 1)</span>
                        <i class="fa-solid fa-calculator text-green-400"></i>
                    </div>
                    <div class="text-3xl font-extrabold tracking-tight text-white mb-1" id="right-roi-value">0 kr</div>
                    <div class="text-xs text-slate-400">med AutoFlow‚Ñ¢</div>
                </div>
            </div>
        </aside>

    </div>

    <!-- JAVASCRIPT -->
    <script>
        // --- DATA: PITCHES (Exact Text) ---
        const pitches = {
            trap: { 
                title: "Ramverk 1: \"App-f√§llan\" Diagnos (Cold Call / F√∂rsta m√∂tet)", 
                text: "Hej [Namn], detta √§r fr√•n Samify.\n\nJag ringer f√∂r att vi ser en tydlig trend hos bolag i er storlek just nu ‚Äì ni har skaffat fantastiska verktyg som Fortnox och HubSpot, men det slutar ofta med att personalen f√•r agera 'm√§nskligt lim' och manuellt flytta data mellan dem. Vi kallar det f√∂r 'App-f√§llan'.\n\nJag √§r nyfiken ‚Äì n√§r era s√§ljare st√§nger en aff√§r idag, dyker den fakturan upp i Fortnox per automatik, eller √§r det n√•gon som m√•ste knappa in den f√∂r hand?\n\n(Om svaret √§r manuellt): \"Det √§r exakt det vi l√∂ser. Vi bygger det digitala r√∂rsystemet s√• att 'Closed Won' i HubSpot betyder 'Faktura Skickad' i Fortnox, direkt. Inga fel, ingen v√§ntan. √Ñr det v√§rt 15 minuter f√∂r att se hur vi kan ta bort den flaskhalsen f√∂r er?\"", 
                goal: "Identifiera sm√§rtan" 
            },
            cfo: { 
                title: "Ramverk 2: \"CFO-Pivoten\" (Ekonomichef)", 
                text: "Hej [Namn],\n\nJag vet att f√∂r m√•nga ekonomichefer √§r m√•nadsskiftet en mardr√∂m av att jaga kvitton och f√∂rs√∂ka matcha ordernummer fr√•n webshopen med inbetalningar i banken.\n\nP√• Samify ers√§tter vi inte er redovisningskonsult. Vi automatiserar den tr√•kiga delen. Vi s√§kerst√§ller att varje order fr√•n skapar en perfekt konterad verifikation i [Visma/Fortnox] automatiskt. Vi har hj√§lpt kunder att korta ner sitt m√•nadsbokslut fr√•n 5 dagar till 4 timmar genom att ta bort den manuella inmatningen.\n\nOm vi kunde eliminera den m√§nskliga faktorn i data√∂verf√∂ringen mellan s√§lj och finans, hur skulle det p√•verka ert teams kapacitet?", 
                goal: "S√§lja compliance & exakthet" 
            },
            scale: { 
                title: "Ramverk 3: \"Skalbar Service\" (Head of Customer Success)", 
                text: "Hej [Namn],\n\nM√•nga jag pratar med f√∂rs√∂ker ers√§tta sina agenter med chattbotar. Vi har en annan filosofi. Vi tror att m√§nniskor ska prata med m√§nniskor, men m√§nniskor ska inte g√∂ra robotarbete.\n\nJust nu, n√§r era agenter svarar p√• ett √§rende i, hur mycket tid l√§gger de p√• att alt-tabba √∂ver till ordersystemet, s√∂ka upp ett kollinummer och klistra in det i chatten?\n\nVi automatiserar den bakgrundskollen. Med Samify, i samma sekund som √§rendet √∂ppnas, √§r orderstatus, fraktinfo och fakturahistorik redan inlagt i anteckningarna. Vi ger dina agenter superkrafter s√• de kan fokusera p√• kunden, inte p√• att leta data.", 
                goal: "Effektivitet" 
            },
            retainer: { 
                title: "Ramverk 4: \"Anti-Konsult\" Retainer Pitch (St√§ngningsfasen)", 
                text: "Jag f√∂rst√•r att ni funderar p√• m√•nadskostnaden. M√•nga t√§nker: 'Varf√∂r kan vi inte bara betala en eng√•ngssumma f√∂r bygget?'\n\nH√§r √§r verkligheten med modern mjukvara: Den r√∂r p√• sig. Fortnox uppdaterar sina s√§kerhetsprotokoll. HubSpot √§ndrar sina dataf√§lt. Zapier sl√§pper nya funktioner. Om ni k√∂per ett 'eng√•ngsprojekt' √§ger ni en tillg√•ng som l√•ngsamt ruttnar. I samma stund ett API uppdateras, stannar er verksamhet.\n\nMed Samify betalar ni inte f√∂r bygget, ni betalar f√∂r Uptime. Ni betalar f√∂r garantin att oavsett vad som h√§nder i teknikv√§rlden, s√• forts√§tter era fakturor att skapas och era leads att fl√∂da. Vi √§r er f√∂rs√§kring mot teknisk skuld.", 
                goal: "Motivera m√•nadskostnad" 
            },
            tech: { 
                title: "Ramverk 5: \"Teknisk Trygghet\" (CTO/IT-Chef)", 
                text: "Jag uppskattar fr√•gan om datas√§kerhet och Shadow IT. Det √§r en mycket valid po√§ng.\n\nDet √§r d√§rf√∂r Samify inte arbetar som en vanlig 'slutanv√§ndare'. Vi behandlar automation som kod.\n\nMinsta Privilegium: Vi skopar v√•ra API-nycklar s√• att de enbart r√∂r de specifika dataset som kr√§vs.\nFelhantering: Vi bygger logik f√∂r misslyckanden ‚Äì om ett API g√∂r timeout har vi retry-logik och larmsystem, s√• ingen data f√∂rsvinner i tomma intet.\nGovernance: Ist√§llet f√∂r att 10 anst√§llda har sina egna privata Zaps, centraliserar vi allt i ett f√∂retagskonto med audit logs. Ni f√•r mer kontroll och insyn, inte mindre.\n\nVi agerar i praktiken som ert outsourcade DevOps-team f√∂r integrationslagret.", 
                goal: "Etablera f√∂rtroende" 
            }
        };

        // --- DATA: OBJECTIONS (Exact Text) ---
        const objections = [
            // Kategori A
            { cat: "A", trig: "1. Zapier √§r amerikanskt. GDPR?", resp: "Jag f√∂rst√•r oron helt, det √§r en kritisk fr√•ga f√∂r alla svenska bolag idag. Det √§r viktigt att skilja p√• lagring och processering. Zapier har certifierat sig enligt Data Privacy Framework (DPF) och anv√§nder Standard Contractual Clauses (SCCs) vilket ger en laglig grund f√∂r √∂verf√∂ringen. Men f√∂r att vara extra s√§kra kan vi designa era fl√∂den med principen om dataminimering. Vi kan se till att k√§nslig data (som personnummer) antingen anonymiseras innan den n√•r Zapier, eller att vi anv√§nder EU-baserade mellanh√§nder f√∂r de k√§nsligaste delarna. Vi s√§ljer inte bara automation, vi s√§ljer en s√§ker arkitektur." },
            { cat: "A", trig: "2. Vi till√•ter inte tredjeparts√•tkomst", resp: "Det √§r en klok policy. Men paradoxalt nog √§r manuell datahantering ofta en st√∂rre s√§kerhetsrisk p√• grund av den m√§nskliga faktorn och bristen p√• sp√•rbarhet. N√§r vi integrerar via API anv√§nder vi 'Scoped Access' ‚Äì det inneb√§r att vi ger automationen en nyckel som bara kan g√∂ra exakt det den ska (t.ex. 'Skapa Faktura') och inget annat. Den kan inte l√§sa era l√∂ner eller se era bankkonton om vi inte explicit till√•ter det. En m√§nsklig anv√§ndare har ofta full admin-r√§ttighet, medan v√•ra botar f√∂ljer principen om 'minsta privilegium'." },
            { cat: "A", trig: "3. Om automationen l√∂per amok?", resp: "Automationer f√∂ljer strikt logik: 'Om X h√§nder, g√∂r Y'. De har ingen egen vilja. Dessutom bygger vi alltid in s√§kerhetssp√§rrar och 'Dry Run'-l√§gen under testfasen. Viktigast av allt √§r att de flesta API-kopplingar vi s√§tter upp inte ens har beh√∂righet att radera data, bara att skapa eller uppdatera den. Risken f√∂r att en tr√∂tt medarbetare r√•kar radera en fil √§r statistiskt sett mycket h√∂gre." },
            { cat: "A", trig: "4. Data m√•ste stanna i EU/Sverige", resp: "Vi kan respektera det. F√∂r processer som kr√§ver strikt datatvistelse inom EU kan vi anv√§nda alternativa verktyg eller hybridl√∂sningar d√§r datan aldrig l√§mnar EU-servrar, och Zapier endast anv√§nds som en signalgivare (orkestrator) utan att payloaden (datan) passerar genom USA. Vi anpassar verktygsl√•dan efter era krav, inte tv√§rtom." },
            { cat: "A", trig: "5. S√§ljer ni v√•r data?", resp: "Samify agerar som ett personuppgiftsbitr√§de. Vi √§ger aldrig er data. V√•rt avtal reglerar tydligt att vi endast behandlar data enligt era instruktioner f√∂r att utf√∂ra tj√§nsten. Vi har tystnadsplikt och v√•ra system √§r designade f√∂r att inte lagra data l√§ngre √§n n√∂dv√§ndigt f√∂r transaktionen." },
            // Kategori B
            { cat: "B", trig: "6. Unika och komplexa processer", resp: "Det √§r faktiskt det b√§sta argumentet f√∂r automation. 'Unik' betyder ofta bara att den f√∂ljer specifika regler. Om ni kan skriva ner reglerna (t.ex. 'Om ordern √§r √∂ver 10 000 kr, mejla chefen'), s√• √§r det inte komplext f√∂r en dator ‚Äì det √§r bara logik. Det enda vi inte kan automatisera √§r magk√§nsla. Allt som √§r regelstyrt g√∂r vi b√§ttre och snabbare." },
            { cat: "B", trig: "7. Testat sj√§lva, slutade fungera", resp: "DIY-automation √§r sk√∂rt. N√§r personen som byggde det slutar, eller n√§r ett API uppdateras, faller allt. Det √§r precis d√§rf√∂r Samify finns som en tj√§nst. Ni k√∂per inte bara bygget, ni k√∂per 'Drift'. Vi √∂vervakar fl√∂dena dygnet runt. Om en koppling g√•r ner, fixar vi det ofta innan ni ens m√§rkt att det h√§nt. Det √§r skillnaden p√• ett hobbyprojekt och infrastruktur." },
            { cat: "B", trig: "8. Realtidsdata (Zapier 15min)", resp: "Helt r√§tt, i vissa fall √§r 15 minuter en evighet. D√§rf√∂r f√∂rlitar vi oss inte bara p√• polling (att fr√•ga systemet var 15:e minut). Vi anv√§nder Webhooks d√§r det √§r m√∂jligt. Det betyder att s√• fort h√§ndelsen sker i System A, skickas en signal direkt till System B. Det sker omedelbart. Vi designar f√∂r hastighet d√§r det kr√§vs." },
            { cat: "B", trig: "9. Smutsig data / Kaos", resp: "Automation √§r faktiskt botemedlet mot smutsig data. Vi kan bygga in valideringssteg ‚Äì t.ex. 'Om telefonnumret saknar landskod, l√§gg till +46' eller 'Om e-post saknas, stoppa och varna en m√§nniska'. Vi fungerar som ett filter som tv√§ttar datan medan den flyttas, s√• att ert aff√§rssystem f√∂rblir rent." },
            { cat: "B", trig: "10. Fortnox-licenser?", resp: "Det st√§mmer att Fortnox kr√§ver en integrationslicens (ca 149 kr/m√•n), men den kostnaden √§r f√∂rsumbar j√§mf√∂rt med tiden ni sparar. Vi sk√∂ter hela den tekniska konfigurationen och aktiveringen √•t er, s√• ni slipper navigera i deras utvecklarportaler. Vi g√∂r det kr√•ngliga enkelt." },
            // Kategori C
            { cat: "C", trig: "11. Det √§r f√∂r dyrt (Har personal)", resp: "L√•t oss r√§kna p√• alternativkostnaden. Om din s√§ljadministrat√∂r l√§gger 2 timmar om dagen p√• att flytta data, √§r det ca 40 timmar i m√•naden. Med sociala avgifter och overhead kostar det er antagligen runt 20 000 - 30 000 kr i m√•naden i ren 'copy-paste'-tid. V√•r tj√§nst kostar en br√•kdel av det, och den √§r aldrig sjuk eller ledig." },
            { cat: "C", trig: "12. Varf√∂r m√•nadskostnad? (Retainer)", resp: "Mjukvara √§r inte statisk. Fortnox uppdaterar sina API:er, HubSpot √§ndrar sina dataf√§lt. Om vi bygger och l√§mnar, har ni en 'ruttnande' tillg√•ng som kommer g√• s√∂nder om 6 m√•nader. M√•nadskostnaden √§r er f√∂rs√§kring. Den garanterar att era aff√§rskritiska fl√∂den forts√§tter fungera oavsett vad som h√§nder i teknikv√§rlden." },
            { cat: "C", trig: "13. Vi kan g√∂ra det internt", resp: "Er IT-person √§r v√§rdefull. Vill ni att hen ska l√§gga 10 timmar i veckan p√• att fels√∂ka en webhook, eller ska hen fokusera p√• er k√§rnverksamhet? Intern automation blir ofta 'Shadow IT' ‚Äì o√∂vervakad och odokumenterad. Vi tillf√∂r dokumentation, SLAs och en struktur som g√∂r er mindre s√•rbara." },
            { cat: "C", trig: "14. Vi √§r f√∂r sm√•", resp: "Sm√• team har faktiskt st√∂rst nytta av automation. Ni har inte budget att anst√§lla fler administrat√∂rer. Automation ger er kapaciteten hos ett storbolag utan overhead-kostnaden. Det √§r s√• ni skalar utan att anst√§lla ihj√§l er." },
            { cat: "C", trig: "15. Vi √§r f√∂r STORA (MuleSoft)", resp: "MuleSoft √§r fantastiskt om ni har tv√• √•r och en miljonbudget. Samify √§r f√∂r det 'agila lagret' av verksamheten ‚Äì marknadsf√∂ring, s√§lj, snabba experiment. Vi ers√§tter inte ert core-banking system, vi automatiserar de tusentals uppgifter som sker i kanten av systemen, och vi g√∂r det p√• dagar, inte √•r." },
            // Kategori D
            { cat: "D", trig: "16. Kunder vill prata med m√§nniskor", resp: "Vi h√•ller med till 100%. Det √§r d√§rf√∂r vi automatiserar administrationen, inte relationen. Vi ser till att fakturan skapas och lagret uppdateras automatiskt, s√• att din s√§ljare f√•r mer tid att faktiskt prata med kunden. Vi automatiserar tystnaden mellan samtalen." },
            { cat: "D", trig: "17. Tappar personlig touch", resp: "Tv√§rtom. Genom att automatisera datainsamlingen kan vi se till att din personal har all info om kunden framf√∂r sig n√§r de ringer. Ingen beh√∂ver fr√•ga 'vad best√§llde du?', f√∂r det syns redan. Det g√∂r m√∂tet mer personligt och professionellt." },
            { cat: "D", trig: "18. Anst√§llda hotade", resp: "Vi tar bort de tr√•kiga uppgifterna, inte jobben. Ingen gillar att flytta rader fr√•n Excel till Visma. Vi frig√∂r tid f√∂r dem att g√∂ra det de √§r anst√§llda f√∂r ‚Äì s√§lja, skapa och l√∂sa problem. Vi ger dem superkrafter." },
            { cat: "D", trig: "19. Vi byter CRM snart", resp: "Att v√§nta inneb√§r att ni accepterar 6 m√•nader till av ineffektivitet. Det fina med v√•r modell √§r att den √§r modul√§r. Byter ni CRM, 'pluggar vi bara ur' det gamla och kopplar in det nya i fl√∂det. Logiken best√•r. Ni ska inte beh√∂va pausa er tillv√§xt f√∂r ett systembyte." },
            { cat: "D", trig: "20. Fungerar det med...?", resp: "Har det ett API eller skickar det e-postnotiser? D√• fungerar det. √Ñven om det inte finns en f√§rdig 'app' i Zapier, kan vi bygga en custom integration. Vi hittar n√§stan aldrig ett molnbaserat system vi inte kan prata med." }
        ];

        // --- DATA: ARSENAL QUESTIONS (Exact Text) ---
        const arsenalQuestions = [
            { cat: "Operativ Tid", q: "1. Kan du beskriva resan f√∂r en kundorder fr√•n webshop till bokf√∂rt verifikat?" },
            { cat: "Operativ Tid", q: "2. Hur mycket tid l√§gger s√§ljteamet p√• admin j√§mf√∂rt med att st√§nga aff√§rer?" },
            { cat: "Operativ Tid", q: "3. N√§r ni st√§nger i CRM:et, hur hamnar datan i ekonomisystemet idag?" },
            { cat: "Operativ Tid", q: "4. Vilka uppgifter √§r s√• monotona att ni sk√§ms √∂ver att l√•ta en m√§nniska g√∂ra dem?" },
            { cat: "Operativ Tid", q: "5. Om din admin-person var sjuk i tv√• veckor, vad skulle stanna av helt?" },
            { cat: "Ekonomi/CFO", q: "6. Hur m√•nga dagar tar ert m√•nadsbokslut och vad tar mest tid?" },
            { cat: "Ekonomi/CFO", q: "7. Hur matchar ni inbetalningar p√• banken med ordernummer idag?" },
            { cat: "Ekonomi/CFO", q: "8. Vad kostar det i tid/pengar n√§r en faktura blir fel p.g.a. m√§nskliga faktorn?" },
            { cat: "Ekonomi/CFO", q: "9. Hur mycket tid l√§ggs p√• att jaga kvitton och underlag internt?" },
            { cat: "Ekonomi/CFO", q: "10. Hur skulle ert kassafl√∂de p√•verkas av omedelbar fakturering vid st√§ngd aff√§r?" },
            { cat: "Skalbarhet", q: "11. Om ni dubblar volymen n√§sta kvartal, hur m√•nga nyanst√§llningar kr√§vs?" },
            { cat: "Skalbarhet", q: "12. Hur s√§kerst√§ller ni att nya system pratar med era gamla utan merarbete?" },
            { cat: "Skalbarhet", q: "13. Vad hindrar er fr√•n att ta in 20% fler kunder med nuvarande personalstyrka?" },
            { cat: "Skalbarhet", q: "14. Hur mycket 'Shadow IT' (egna Excel-l√∂sningar) har ni i organisationen?" },
            { cat: "Skalbarhet", q: "15. Hur planerar ni att anv√§nda AI f√∂r att vinna mot era konkurrenter?" },
            { cat: "Service/Support", q: "16. I hur m√•nga system m√•ste personalen leta f√∂r att svara p√• en kundfr√•ga?" },
            { cat: "Service/Support", q: "17. Hur mycket tid l√§ggs p√• att manuellt skicka ut kollinummer?" },
            { cat: "Service/Support", q: "18. Hur skulle kundupplevelsen √§ndras om all historik fanns framme direkt?" },
            { cat: "Service/Support", q: "19. Vilka √§r de 3 vanligaste fr√•gorna som egentligen √§r rena 'robot-svar'?" },
            { cat: "Service/Support", q: "20. Hur mycket tid l√§ggs p√• att flytta √§renden mellan kundtj√§nst och lager?" }
        ];

        window.onload = () => {
            renderPitch('trap');
            renderObjections();
            renderArsenal();
            calculateROI();
            initFormLogic();
        };

        // --- NAVIGATION ---
        function setPhase(phase) {
            document.querySelectorAll('.phase-btn').forEach(b => {
                b.classList.remove('active', 'bg-white', 'text-indigo-900', 'shadow-sm');
                b.classList.add('text-indigo-100', 'hover:bg-white/10');
            });
            document.getElementById('btn-' + phase).classList.add('active', 'bg-white', 'text-indigo-900', 'shadow-sm');
            document.getElementById('btn-' + phase).classList.remove('text-indigo-100', 'hover:bg-white/10');
            
            document.querySelectorAll('.phase-view').forEach(v => v.classList.add('hidden'));
            document.getElementById('view-' + phase).classList.remove('hidden');
        }

        function switchPresTab(tab) {
            document.querySelectorAll('.sub-tab').forEach(t => t.classList.remove('active', 'border-b-2', 'border-indigo-600', 'bg-indigo-50', 'text-indigo-600'));
            document.getElementById('tab-' + tab).classList.add('active', 'border-b-2', 'border-indigo-600', 'bg-indigo-50', 'text-indigo-600');
            
            document.getElementById('content-pitches').classList.add('hidden');
            document.getElementById('content-competitors').classList.add('hidden');
            document.getElementById('content-' + tab).classList.remove('hidden');
        }

        // --- ROI LOGIC ---
        function calculateROI() {
            const salary = parseInt(document.getElementById('roi-salary').value);
            const hoursPerDay = parseFloat(document.getElementById('roi-hours').value);
            
            const packageCost = parseInt(document.getElementById('roi-package').value);
            const startFee = 7995;
            const scenario = parseFloat(document.getElementById('roi-scenario').value);

            // Cost Calculation
            const hourlyCost = salary / 160; 
            const dailyCost = hourlyCost * hoursPerDay;
            const monthlySavings = dailyCost * 21; 
            const annualSavings = monthlySavings * 11; 

            // Add Soft Value from Checkboxes
            let softValue = 0;
            const elClosing = document.getElementById('roi-closing');
            const elScale = document.getElementById('roi-scale');
            const elError = document.getElementById('roi-error');
            const elTech = document.getElementById('roi-tech');

            if(elClosing && elClosing.checked) softValue += 20000;
            if(elScale && elScale.checked) softValue += 50000;
            if(elError && elError.checked) softValue += 15000;
            if(elTech && elTech.checked) softValue += 25000;

            const totalGrossSavings = (annualSavings + softValue) * scenario;
            
            // Net = Savings - (Package * 12) - StartFee
            const totalSamifyCost = (packageCost * 12) + startFee;
            const netFirstYear = totalGrossSavings - totalSamifyCost;

            document.getElementById('roi-hours-display').innerText = hoursPerDay + " h/dag";
            
            const moneyStr = Math.round(netFirstYear).toLocaleString() + " kr";
            document.getElementById('res-money').innerText = moneyStr;
            document.getElementById('right-roi-value').innerText = moneyStr; 
        }

        // --- FORM LOGIC (Independent) ---
        function initFormLogic() {
            const steps = document.querySelectorAll('.form-step');
            const nextBtns = document.querySelectorAll('.btn-next');
            const prevBtns = document.querySelectorAll('.btn-prev');
            const form = document.getElementById('customForm');
            let currentStep = 0;

            function updateForm() {
                steps.forEach((s, i) => s.classList.toggle('active', i === currentStep));
                document.getElementById('stepCount').innerText = currentStep + 1;
                document.getElementById('progressBar').style.width = ((currentStep + 1) / steps.length * 100) + '%';
            }

            nextBtns.forEach(btn => btn.addEventListener('click', () => {
                const inputs = steps[currentStep].querySelectorAll('input, select, textarea');
                let valid = true;
                inputs.forEach(i => { if (!i.checkValidity()) { valid = false; i.reportValidity(); } });
                if (valid && currentStep < steps.length - 1) { currentStep++; updateForm(); }
            }));

            prevBtns.forEach(btn => btn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; updateForm(); } }));

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                const btn = form.querySelector('.btn-submit');
                btn.innerText = "Skickar...";
                try {
                    await fetch(form.action, { method: 'POST', body: new FormData(form), headers: { 'Accept': 'application/json' } });
                    document.getElementById('form-wrapper').style.display = 'none';
                    document.getElementById('success-message').style.display = 'block';
                } catch { alert('Fel vid s√§ndning.'); btn.innerText = "F√∂rs√∂k igen"; }
            });
            updateForm();
        }

        // --- PITCH & OBJECTION RENDER ---
        function renderPitch(key) {
            const p = pitches[key];
            document.getElementById('pitch-display').innerHTML = `
                <div class="flex items-start gap-5 animate-[fadeIn_0.4s_ease-out]">
                    <div class="text-5xl bg-indigo-50 p-4 rounded-3xl text-indigo-600 shadow-sm border border-indigo-100">${p.icon || 'üí°'}</div>
                    <div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-2">${p.title}</h3>
                        <p class="text-lg text-slate-600 italic border-l-4 border-indigo-500 pl-4 py-2 bg-slate-50 rounded-r-lg leading-relaxed whitespace-pre-line">${p.text}</p>
                        <div class="mt-4"><span class="text-xs font-bold uppercase tracking-wider text-white bg-indigo-600 px-3 py-1 rounded-full">M√•l: ${p.goal}</span></div>
                    </div>
                </div>`;
            document.querySelectorAll('.p-pill').forEach(b => {
                b.classList.remove('bg-indigo-600', 'text-white', 'border-indigo-600', 'shadow-md');
                b.classList.add('bg-white', 'text-slate-500', 'border-slate-200');
                if(b.onclick.toString().includes(key)) {
                    b.classList.remove('bg-white', 'text-slate-500', 'border-slate-200');
                    b.classList.add('bg-indigo-600', 'text-white', 'border-indigo-600', 'shadow-md');
                }
            });
        }

        function renderObjections(filter = "") {
            const list = document.getElementById('objections-list');
            list.innerHTML = "";
            objections.filter(o => o.trig.toLowerCase().includes(filter.toLowerCase())).forEach((obj, idx) => {
                let badgeColor = "bg-gray-100 text-gray-600";
                if(obj.cat === "A") badgeColor = "bg-red-100 text-red-600";
                if(obj.cat === "B") badgeColor = "bg-blue-100 text-blue-600";
                if(obj.cat === "C") badgeColor = "bg-green-100 text-green-600";
                
                list.innerHTML += `
                    <div class="bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition">
                        <button onclick="document.getElementById('ans-${idx}').classList.toggle('open')" class="w-full text-left p-4 font-bold text-slate-700 hover:text-indigo-600 flex justify-between items-center gap-2">
                            <span class="flex items-center gap-2">
                                <span class="text-[10px] font-bold px-2 py-0.5 rounded ${badgeColor}">KAT ${obj.cat}</span>
                                ${obj.trig}
                            </span>
                            <i class="fa-solid fa-chevron-down text-xs text-slate-300"></i>
                        </button>
                        <div id="ans-${idx}" class="objection-content bg-slate-50"><p class="p-6 border-t border-slate-200 text-slate-600 leading-relaxed text-sm whitespace-pre-line">${obj.resp}</p></div>
                    </div>`;
            });
        }
        
        function renderArsenal() {
            const list = document.getElementById('arsenal-list');
            list.innerHTML = "";
            arsenalQuestions.forEach((item) => {
                list.innerHTML += `
                    <div class="bg-white p-4 rounded-lg border border-slate-100 shadow-sm text-sm hover:border-indigo-200 transition">
                        <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-wider mb-1 block">${item.cat}</span>
                        <p class="text-slate-700 font-medium">"${item.q}"</p>
                    </div>`;
            });
        }

        document.getElementById('objSearch').addEventListener('input', (e) => renderObjections(e.target.value));

        // --- CHART ---
        function initChart() {
            new Chart(document.getElementById('compChart'), {
                type: 'radar',
                data: {
                    labels: ['Automation', 'Chatt', 'Integration', 'Proaktiv', 'Backend', 'Skala'],
                    datasets: [{ label: 'Samify', data: [95, 40, 95, 90, 90, 85], borderColor: '#4f46e5', backgroundColor: 'rgba(79, 70, 229, 0.2)' }, 
                               { label: 'Chatbots', data: [30, 95, 40, 30, 20, 60], borderColor: '#f59e0b', backgroundColor: 'rgba(245, 158, 11, 0.2)' }]
                },
                options: { scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { display: false } } }, plugins: { legend: { position: 'bottom' } } }
            });
        }
    </script>
</body>
</html>